{"version":3,"file":"jss-plugin-default-unit.js","sources":["../src/defaultUnits.js","../src/index.js"],"sourcesContent":["// @flow\n\nimport {hasCSSTOMSupport} from 'jss'\n\nconst px = hasCSSTOMSupport && CSS ? CSS.px : 'px'\nconst ms = hasCSSTOMSupport && CSS ? CSS.ms : 'ms'\nconst percent = hasCSSTOMSupport && CSS ? CSS.percent : '%'\n\n/**\n * Generated jss-plugin-default-unit CSS property units\n *\n * @type object\n */\nexport default {\n  // Animation properties\n  'animation-delay': ms,\n  'animation-duration': ms,\n\n  // Background properties\n  'background-position': px,\n  'background-position-x': px,\n  'background-position-y': px,\n  'background-size': px,\n\n  // Border Properties\n  border: px,\n  'border-bottom': px,\n  'border-bottom-left-radius': px,\n  'border-bottom-right-radius': px,\n  'border-bottom-width': px,\n  'border-left': px,\n  'border-left-width': px,\n  'border-radius': px,\n  'border-right': px,\n  'border-right-width': px,\n  'border-top': px,\n  'border-top-left-radius': px,\n  'border-top-right-radius': px,\n  'border-top-width': px,\n  'border-width': px,\n\n  // Margin properties\n  margin: px,\n  'margin-bottom': px,\n  'margin-left': px,\n  'margin-right': px,\n  'margin-top': px,\n\n  // Padding properties\n  padding: px,\n  'padding-bottom': px,\n  'padding-left': px,\n  'padding-right': px,\n  'padding-top': px,\n\n  // Mask properties\n  'mask-position-x': px,\n  'mask-position-y': px,\n  'mask-size': px,\n\n  // Width and height properties\n  height: px,\n  width: px,\n  'min-height': px,\n  'max-height': px,\n  'min-width': px,\n  'max-width': px,\n\n  // Position properties\n  bottom: px,\n  left: px,\n  top: px,\n  right: px,\n\n  // Shadow properties\n  'box-shadow': px,\n  'text-shadow': px,\n\n  // Column properties\n  'column-gap': px,\n  'column-rule': px,\n  'column-rule-width': px,\n  'column-width': px,\n\n  // Font and text properties\n  'font-size': px,\n  'font-size-delta': px,\n  'letter-spacing': px,\n  'text-indent': px,\n  'text-stroke': px,\n  'text-stroke-width': px,\n  'word-spacing': px,\n\n  // Motion properties\n  motion: px,\n  'motion-offset': px,\n\n  // Outline properties\n  outline: px,\n  'outline-offset': px,\n  'outline-width': px,\n\n  // Perspective properties\n  perspective: px,\n  'perspective-origin-x': percent,\n  'perspective-origin-y': percent,\n\n  // Transform properties\n  'transform-origin': percent,\n  'transform-origin-x': percent,\n  'transform-origin-y': percent,\n  'transform-origin-z': percent,\n\n  // Transition properties\n  'transition-delay': ms,\n  'transition-duration': ms,\n\n  // Alignment properties\n  'vertical-align': px,\n  'flex-basis': px,\n\n  // Some random properties\n  'shape-margin': px,\n  size: px,\n\n  // Grid properties\n  grid: px,\n  'grid-gap': px,\n  'grid-row-gap': px,\n  'grid-column-gap': px,\n  'grid-template-rows': px,\n  'grid-template-columns': px,\n  'grid-auto-rows': px,\n  'grid-auto-columns': px,\n\n  // Not existing properties.\n  // Used to avoid issues with jss-plugin-expand integration.\n  'box-shadow-x': px,\n  'box-shadow-y': px,\n  'box-shadow-blur': px,\n  'box-shadow-spread': px,\n  'font-line-height': px,\n  'text-shadow-x': px,\n  'text-shadow-y': px,\n  'text-shadow-blur': px\n}\n","// @flow\nimport type {Plugin} from 'jss'\nimport defaultUnits from './defaultUnits'\n\nexport type Options = {[key: string]: string | ((val: number) => string)}\n\n/**\n * Clones the object and adds a camel cased property version.\n */\nfunction addCamelCasedVersion(obj) {\n  const regExp = /(-[a-z])/g\n  const replace = str => str[1].toUpperCase()\n  const newObj = {}\n  for (const key in obj) {\n    newObj[key] = obj[key]\n    newObj[key.replace(regExp, replace)] = obj[key]\n  }\n  return newObj\n}\n\nconst units = addCamelCasedVersion(defaultUnits)\n\n/**\n * Recursive deep style passing function\n */\nfunction iterate(prop: string, value: any, options: Options) {\n  if (!value) return value\n\n  if (Array.isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      value[i] = iterate(prop, value[i], options)\n    }\n  } else if (typeof value === 'object') {\n    if (prop === 'fallbacks') {\n      for (const innerProp in value) {\n        value[innerProp] = iterate(innerProp, value[innerProp], options)\n      }\n    } else {\n      for (const innerProp in value) {\n        value[innerProp] = iterate(`${prop}-${innerProp}`, value[innerProp], options)\n      }\n    }\n  } else if (typeof value === 'number') {\n    const unit = options[prop] || units[prop]\n\n    if (unit) {\n      return typeof unit === 'function' ? unit(value).toString() : `${value}${unit}`\n    }\n\n    return value.toString()\n  }\n\n  return value\n}\n\n/**\n * Add unit to numeric values.\n */\nexport default function defaultUnit(options: Options = {}): Plugin {\n  const camelCasedOptions = addCamelCasedVersion(options)\n\n  function onProcessStyle(style, rule) {\n    if (rule.type !== 'style') return style\n\n    for (const prop in style) {\n      style[prop] = iterate(prop, style[prop], camelCasedOptions)\n    }\n\n    return style\n  }\n\n  function onChangeValue(value, prop) {\n    return iterate(prop, value, camelCasedOptions)\n  }\n\n  return {onProcessStyle, onChangeValue}\n}\n"],"names":["px","hasCSSTOMSupport","CSS","ms","percent","border","margin","padding","height","width","bottom","left","top","right","motion","outline","perspective","size","grid","addCamelCasedVersion","obj","regExp","replace","str","toUpperCase","newObj","key","units","defaultUnits","iterate","prop","value","options","Array","isArray","i","length","innerProp","unit","toString","defaultUnit","camelCasedOptions","onProcessStyle","style","rule","type","onChangeValue"],"mappings":"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"}